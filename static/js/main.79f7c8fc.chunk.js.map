{"version":3,"sources":["Data.js","App.js","serviceWorker.js","index.js"],"names":["aspects","core_full","name","id","family","tier","requirements","rewards","force","entropy","form","inertia","life","nodes","hasChoiceNode","core_force","isCoreNode","falcon","hatchet","hornet","serpent","arcanist","archer","manticore","scorpion","tiger","conqueror","kraken","wrath","core_entropy","crow","fly","vulture","wolf","blood_ape","extinction","imp","hyena","supplicant","death","decay","demilich","core_form","chalice","key","nautilus","silkworm","basilisk","doppelganger","dragon","gryphon","wealth","cerberus","ritual","sphinx","core_inertia","armadillo","auroch","crab","guardsman","casque","centurion","gladiator","hippopotamus","rhinoceros","arena","champion","fortress","core_life","beetle","hind","lizard","rabbit","enchantress","huntress","nymph","pegasus","stag","goddess","hope","splendor","strings","String","prototype","format","args","arguments","this","replace","m","n","extraAspects","x","aspect","y","rewardsPerPoint","totalRequirements","z","Checkbox","props","app","state","selection","includes","data","updateSelection","updateExclusion","excluded","text","onClick","undefined","useFullCore","toggle","className","darkMode","React","Component","Embodiment","type","amount","Aspect","elements","element","push","embs","string","header","charAt","toUpperCase","slice","cost","getRewards","nodeText","content","getTooltip","placement","duration","getRequirementsText","shuffle","array","temporaryValue","randomIndex","currentIndex","length","Math","floor","random","isInObject","thing","obj","getTotalPoints","build","points","GetPathOperationOrder","toRemove","path","asp","operation","splice","time","console","log","getTotalReqs","hideUnused","embodiments","getTotalRewards","showAny","any","r","fullfillsRequirements","reqs","e","aspectAlreadyPicked","App","result","waiting","considerDipping","selfSustain","pointsBudget","preference","iterations","maximumOutputs","resultIndex","window","localStorage","getItem","change","current","bestPaths","setState","list","realList","excludedAspects","newList","hasRelevantReward","reward","dipping","generated","extraEmbodimentType","bind","func","hasOwnProperty","aspectWithHighestRequirements","i","chosenAspects","b","getRemainingReqs","hasRelevantRewards","includesAspect","deleteUnused","filterApplicableAspects","_","cloneDeep","Object","keys","confirm","relevantEmbodiments","buildWithChosenAspects","validBuilds","tier1s","selfSustainBuild","embBonus","sample","bestBuilds","bestPoints","pointsNeeded","bestPathsPoints","keyAspects","c","role","pathIds","duplicates","pathId","sort","filter","item","buildPoints","selfSustainPoints","pathPoints","iteration","u","availableAspects","attempts","skipRandomChoice","breakThis","v","chosenAspect","newGoals","allChosenNodesObtained","aspectsToRemove","filteredBuild","buildWithoutThat","val","pathOperationOrder","pointsToReach","pointsToSustain","buildInfo","finalCost","score","totalEmbodiments","bestBuild","index","arr","forceAspects","entropyAspects","formAspects","inertiaAspects","lifeAspects","textClass","document","getElementsByTagName","classList","currentAspect","clickCallback","hr","requirementsInfo","reqEmbs","rewEmbs","pointsText","style","marginLeft","resultsPanel","changeIndex","darkModeClass","value","onChange","target","checked","setItem","calculateV2","href","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.79f7c8fc.chunk.js","sourcesContent":["export const aspects = {\r\n    core_full: {\r\n      name: \"Core (Full)\",\r\n      id: \"core_full\",\r\n      family: \"special\",\r\n      tier: 1,\r\n      requirements: {\r\n      },\r\n      rewards: {\r\n        force: 2,\r\n        entropy: 2,\r\n        form: 2,\r\n        inertia: 2,\r\n        life: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    core_force: {\r\n      name: \"Core (Force)\",\r\n      id: \"core_force\",\r\n      family: \"force\",\r\n      tier: 1,\r\n      requirements: {\r\n      },\r\n      rewards: {\r\n        force: 1,\r\n      },\r\n      nodes: 1,\r\n      hasChoiceNode: false,\r\n      isCoreNode: true,\r\n    },\r\n    falcon: {\r\n      name: \"Falcon\",\r\n      id: \"falcon\",\r\n      family: \"force\",\r\n      tier: 1,\r\n      requirements: {\r\n        force: 1\r\n      },\r\n      rewards: {\r\n        force: 3,\r\n        life: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    hatchet: {\r\n      name: \"Hatchet\",\r\n      id: \"hatchet\",\r\n      family: \"force\",\r\n      tier: 1,\r\n      requirements: {\r\n        force: 1\r\n      },\r\n      rewards: {\r\n        force: 3,\r\n        entropy: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    hornet: {\r\n      name: \"Hornet\",\r\n      id: \"hornet\",\r\n      family: \"force\",\r\n      tier: 1,\r\n      requirements: {\r\n        force: 1,\r\n      },\r\n      rewards: {\r\n        force: 3,\r\n        life: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    serpent: {\r\n      name: \"Serpent\",\r\n      id: \"serpent\",\r\n      family: \"force\",\r\n      tier: 1,\r\n      requirements: {\r\n        force: 1,\r\n      },\r\n      rewards: {\r\n        force: 3,\r\n        entropy: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    // FORCE TIER 2\r\n    arcanist: {\r\n      name: \"Arcanist\",\r\n      id: \"arcanist\",\r\n      family: \"force\",\r\n      tier: 2,\r\n      requirements: {\r\n        force: 5,\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        force: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    archer: {\r\n      name: \"Archer\",\r\n      id: \"archer\",\r\n      family: \"force\",\r\n      tier: 2,\r\n      requirements: {\r\n        force: 3,\r\n        entropy: 2,\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        force: 2,\r\n        entropy: 1,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    manticore: {\r\n      name: \"Manticore\",\r\n      id: \"manticore\",\r\n      family: \"force\",\r\n      tier: 2,\r\n      requirements: {\r\n        force: 5,\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        force: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    scorpion: {\r\n      name: \"Scorpion\",\r\n      id: \"scorpion\",\r\n      family: \"force\",\r\n      tier: 2,\r\n      requirements: {\r\n        force: 4,\r\n        entropy: 2,\r\n      },\r\n      rewards: {\r\n        force: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    tiger: {\r\n      name: \"Tiger\",\r\n      id: \"tiger\",\r\n      family: \"force\",\r\n      tier: 2,\r\n      requirements: {\r\n        force: 4,\r\n        life: 2,\r\n      },\r\n      rewards: {\r\n        force: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    // FORCE TIER 3\r\n    conqueror: {\r\n      name: \"Conqueror\",\r\n      id: \"conqueror\",\r\n      family: \"force\",\r\n      tier: 3,\r\n      requirements: {\r\n        force: 7,\r\n        entropy: 1,\r\n        life: 5,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    kraken: {\r\n      name: \"Kraken\",\r\n      id: \"kraken\",\r\n      family: \"force\",\r\n      tier: 3,\r\n      requirements: {\r\n        force: 7,\r\n        entropy: 5,\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    wrath: {\r\n      name: \"Wrath\",\r\n      id: \"wrath\",\r\n      family: \"force\",\r\n      tier: 3,\r\n      requirements: {\r\n        force: 8,\r\n        entropy: 3,\r\n        life: 2,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    // ENTROPY TIER 1\r\n    core_entropy: {\r\n      name: \"Core (Entropy)\",\r\n      id: \"core_entropy\",\r\n      family: \"entropy\",\r\n      tier: 1,\r\n      requirements: {\r\n      },\r\n      rewards: {\r\n        entropy: 1,\r\n      },\r\n      nodes: 1,\r\n      hasChoiceNode: false,\r\n      isCoreNode: true,\r\n    },\r\n    crow: {\r\n      name: \"Crow\",\r\n      id: \"crow\",\r\n      family: \"entropy\",\r\n      tier: 1,\r\n      requirements: {\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        entropy: 3,\r\n        form: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    fly: {\r\n      name: \"Fly\",\r\n      id: \"fly\",\r\n      family: \"entropy\",\r\n      tier: 1,\r\n      requirements: {\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        entropy: 3,\r\n        form: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    vulture: {\r\n      name: \"Vulture\",\r\n      id: \"vulture\",\r\n      family: \"entropy\",\r\n      tier: 1,\r\n      requirements: {\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        entropy: 3,\r\n        force: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    wolf: {\r\n      name: \"Wolf\",\r\n      id: \"wolf\",\r\n      family: \"entropy\",\r\n      tier: 1,\r\n      requirements: {\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        entropy: 3,\r\n        force: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    // ENTROPY TIER 2\r\n    blood_ape: {\r\n      name: \"Blood Ape\",\r\n      id: \"blood_ape\",\r\n      family: \"entropy\",\r\n      tier: 2,\r\n      requirements: {\r\n        entropy: 3,\r\n        force: 1,\r\n        form: 2,\r\n      },\r\n      rewards: {\r\n        entropy: 2,\r\n        form: 1,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    extinction: {\r\n      name: \"Extinction\",\r\n      id: \"extinction\",\r\n      family: \"entropy\",\r\n      tier: 2,\r\n      requirements: {\r\n        entropy: 4,\r\n        force: 2,\r\n      },\r\n      rewards: {\r\n        entropy: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    imp: {\r\n      name: \"Imp\",\r\n      id: \"imp\",\r\n      family: \"entropy\",\r\n      tier: 2,\r\n      requirements: {\r\n        entropy: 5,\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n        entropy: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    hyena: {\r\n      name: \"Hyena\",\r\n      id: \"hyena\",\r\n      family: \"entropy\",\r\n      tier: 2,\r\n      requirements: {\r\n        entropy: 5,\r\n        force: 1,\r\n      },\r\n      rewards: {\r\n        entropy: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    supplicant: {\r\n      name: \"Supplicant\",\r\n      id: \"supplicant\",\r\n      family: \"entropy\",\r\n      tier: 2,\r\n      requirements: {\r\n        entropy: 4,\r\n        form: 2,\r\n      },\r\n      rewards: {\r\n        entropy: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    // ENTROPY TIER 3\r\n    death: {\r\n      name: \"Death\",\r\n      id: \"death\",\r\n      family: \"entropy\",\r\n      tier: 3,\r\n      requirements: {\r\n        entropy: 8,\r\n        force: 2,\r\n        form: 3,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    decay: {\r\n      name: \"Decay\",\r\n      id: \"decay\",\r\n      family: \"entropy\",\r\n      tier: 3,\r\n      requirements: {\r\n        entropy: 7,\r\n        force: 5,\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    demilich: {\r\n      name: \"Demilich\",\r\n      id: \"demilich\",\r\n      family: \"entropy\",\r\n      tier: 3,\r\n      requirements: {\r\n        entropy: 7,\r\n        force: 1,\r\n        form: 5,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 6,\r\n      hasChoiceNode: false,\r\n    },\r\n    // FORM TIER 1\r\n    core_form: {\r\n      name: \"Core (Form)\",\r\n      id: \"core_form\",\r\n      family: \"form\",\r\n      tier: 1,\r\n      requirements: {\r\n      },\r\n      rewards: {\r\n        form: 1,\r\n      },\r\n      nodes: 1,\r\n      hasChoiceNode: false,\r\n      isCoreNode: true,\r\n    },\r\n    chalice: { // consume the cum chalice\r\n      name: \"Chalice\",\r\n      id: \"chalice\",\r\n      family: \"form\",\r\n      tier: 1,\r\n      requirements: {\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n        form: 3,\r\n        inertia: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    key: {\r\n      name: \"Key\",\r\n      id: \"key\",\r\n      family: \"form\",\r\n      tier: 1,\r\n      requirements: {\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n        form: 3,\r\n        entropy: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    nautilus: {\r\n      name: \"Nautilus\",\r\n      id: \"nautilus\",\r\n      family: \"form\",\r\n      tier: 1,\r\n      requirements: {\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n        form: 3,\r\n        inertia: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    silkworm: {\r\n      name: \"Silkworm\",\r\n      id: \"silkworm\",\r\n      family: \"form\",\r\n      tier: 1,\r\n      requirements: {\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n        form: 3,\r\n        entropy: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    // FORM TIER 2\r\n    basilisk: {\r\n      name: \"Basilisk\",\r\n      id: \"basilisk\",\r\n      family: \"form\",\r\n      tier: 2,\r\n      requirements: {\r\n        form: 4,\r\n        entropy: 2,\r\n      },\r\n      rewards: {\r\n        form: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    doppelganger: {\r\n      name: \"Doppelganger\",\r\n      id: \"doppelganger\",\r\n      family: \"form\",\r\n      tier: 2,\r\n      requirements: {\r\n        form: 5,\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        form: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    dragon: {\r\n      name: \"Dragon\",\r\n      id: \"dragon\",\r\n      family: \"form\",\r\n      tier: 2,\r\n      requirements: {\r\n        form: 5,\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        form: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    gryphon: {\r\n      name: \"Gryphon\",\r\n      id: \"gryphon\",\r\n      family: \"form\",\r\n      tier: 2,\r\n      requirements: {\r\n        form: 4,\r\n        inertia: 2,\r\n      },\r\n      rewards: {\r\n        form: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    wealth: {\r\n      name: \"Wealth\",\r\n      id: \"wealth\",\r\n      family: \"form\",\r\n      tier: 2,\r\n      requirements: {\r\n        form: 3,\r\n        inertia: 2,\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n        form: 2,\r\n        inertia: 1,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    // FORM TIER 3\r\n    cerberus: {\r\n      name: \"Cerberus\",\r\n      id: \"cerberus\",\r\n      family: \"form\",\r\n      tier: 3,\r\n      requirements: {\r\n        form: 7,\r\n        inertia: 5,\r\n        entropy: 1,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    ritual: {\r\n      name: \"Ritual\",\r\n      id: \"ritual\",\r\n      family: \"form\",\r\n      tier: 3,\r\n      requirements: {\r\n        form: 7,\r\n        inertia: 1,\r\n        entropy: 5,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    sphinx: {\r\n      name: \"Sphinx\",\r\n      id: \"sphinx\",\r\n      family: \"form\",\r\n      tier: 3,\r\n      requirements: {\r\n        form: 8,\r\n        inertia: 3,\r\n        entropy: 2,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    // INERTIA TIER 1\r\n    core_inertia: {\r\n      name: \"Core (Inertia)\",\r\n      id: \"core_inertia\",\r\n      family: \"inertia\",\r\n      tier: 1,\r\n      requirements: {\r\n      },\r\n      rewards: {\r\n        inertia: 1,\r\n      },\r\n      nodes: 1,\r\n      hasChoiceNode: false,\r\n      isCoreNode: true,\r\n    },\r\n    armadillo: {\r\n      name: \"Armadillo\",\r\n      id: \"armadillo\",\r\n      family: \"inertia\",\r\n      tier: 1,\r\n      requirements: {\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        inertia: 3,\r\n        form: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    auroch: {\r\n      name: \"Auroch\",\r\n      id: \"auroch\",\r\n      family: \"inertia\",\r\n      tier: 1,\r\n      requirements: {\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        inertia: 3,\r\n        life: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    crab: {\r\n      name: \"Crab\",\r\n      id: \"crab\",\r\n      family: \"inertia\",\r\n      tier: 1,\r\n      requirements: {\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        inertia: 3,\r\n        life: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    guardsman: {\r\n      name: \"Guardsman\",\r\n      id: \"guardsman\",\r\n      family: \"inertia\",\r\n      tier: 1,\r\n      requirements: {\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        inertia: 3,\r\n        form: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    // INERTIA TIER 2\r\n    casque: {\r\n      name: \"Casque\",\r\n      id: \"casque\",\r\n      family: \"inertia\",\r\n      tier: 2,\r\n      requirements: {\r\n        inertia: 5,\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        inertia: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    centurion: {\r\n      name: \"Centurion\",\r\n      id: \"centurion\",\r\n      family: \"inertia\",\r\n      tier: 2,\r\n      requirements: {\r\n        inertia: 3,\r\n        form: 1,\r\n        life: 2,\r\n      },\r\n      rewards: {\r\n        inertia: 2,\r\n        life: 1,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    gladiator: {\r\n      name: \"Gladiator\",\r\n      id: \"gladiator\",\r\n      family: \"inertia\",\r\n      tier: 2,\r\n      requirements: {\r\n        inertia: 3,\r\n        form: 3,\r\n      },\r\n      rewards: {\r\n        inertia: 2,\r\n        form: 1,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    hippopotamus: {\r\n      name: \"Hippopotamus\",\r\n      id: \"hippopotamus\",\r\n      family: \"inertia\",\r\n      tier: 2,\r\n      requirements: {\r\n        inertia: 4,\r\n        life: 2,\r\n      },\r\n      rewards: {\r\n        inertia: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    rhinoceros: {\r\n      name: \"Rhinoceros\",\r\n      id: \"rhinoceros\",\r\n      family: \"inertia\",\r\n      tier: 2,\r\n      requirements: {\r\n        inertia: 4,\r\n        form: 2,\r\n      },\r\n      rewards: {\r\n        inertia: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    // INERTIA TIER 3\r\n    arena: {\r\n      name: \"Arena\",\r\n      id: \"arena\",\r\n      family: \"inertia\",\r\n      tier: 3,\r\n      requirements: {\r\n        inertia: 7,\r\n        life: 5,\r\n        form: 1,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    champion: {\r\n      name: \"Champion\",\r\n      id: \"champion\",\r\n      family: \"inertia\",\r\n      tier: 3,\r\n      requirements: {\r\n        inertia: 8,\r\n        life: 3,\r\n        form: 2,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    fortress: {\r\n      name: \"Fortress\",\r\n      id: \"fortress\",\r\n      family: \"inertia\",\r\n      tier: 3,\r\n      requirements: {\r\n        inertia: 7,\r\n        life: 1,\r\n        form: 5,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    // LIFE TIER 1\r\n    core_life: {\r\n      name: \"Core (Life)\",\r\n      id: \"core_life\",\r\n      family: \"life\",\r\n      tier: 1,\r\n      requirements: {\r\n      },\r\n      rewards: {\r\n        life: 1,\r\n      },\r\n      nodes: 1,\r\n      hasChoiceNode: false,\r\n      isCoreNode: true,\r\n    },\r\n    beetle: {\r\n      name: \"Beetle\",\r\n      id: \"beetle\",\r\n      family: \"life\",\r\n      tier: 1,\r\n      requirements: {\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        life: 3,\r\n        force: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    hind: {\r\n      name: \"Hind\",\r\n      id: \"hind\",\r\n      family: \"life\",\r\n      tier: 1,\r\n      requirements: {\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        life: 3,\r\n        force: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    lizard: {\r\n      name: \"Lizard\",\r\n      id: \"lizard\",\r\n      family: \"life\",\r\n      tier: 1,\r\n      requirements: {\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        life: 3,\r\n        inertia: 1,\r\n      },\r\n      nodes: 3,\r\n      hasChoiceNode: false,\r\n    },\r\n    rabbit: {\r\n      name: \"Rabbit\",\r\n      id: \"rabbit\",\r\n      family: \"life\",\r\n      tier: 1,\r\n      requirements: {\r\n        life: 1,\r\n      },\r\n      rewards: {\r\n        life: 3,\r\n        inertia: 2,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    // LIFE TIER 2\r\n    enchantress: {\r\n      name: \"Enchantress\",\r\n      id: \"enchantress\",\r\n      family: \"life\",\r\n      tier: 2,\r\n      requirements: {\r\n        life: 5,\r\n        force: 1,\r\n      },\r\n      rewards: {\r\n        life: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    huntress: {\r\n      name: \"Huntress\",\r\n      id: \"huntress\",\r\n      family: \"life\",\r\n      tier: 2,\r\n      requirements: {\r\n        life: 3,\r\n        force: 2,\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        life: 2,\r\n        force: 1,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    nymph: {\r\n      name: \"Nymph\",\r\n      id: \"nymph\",\r\n      family: \"life\",\r\n      tier: 2,\r\n      requirements: {\r\n        life: 5,\r\n        inertia: 1,\r\n      },\r\n      rewards: {\r\n        life: 3,\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: true,\r\n    },\r\n    pegasus: {\r\n      name: \"Pegasus\",\r\n      id: \"pegasus\",\r\n      family: \"life\",\r\n      tier: 2,\r\n      requirements: {\r\n        life: 4,\r\n        inertia: 2,\r\n      },\r\n      rewards: {\r\n        life: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    stag: {\r\n      name: \"Stag\",\r\n      id: \"stag\",\r\n      family: \"life\",\r\n      tier: 2,\r\n      requirements: {\r\n        life: 4,\r\n        force: 2,\r\n      },\r\n      rewards: {\r\n        life: 2,\r\n      },\r\n      nodes: 4,\r\n      hasChoiceNode: true,\r\n    },\r\n    // LIFE TIER 3\r\n    goddess: {\r\n      name: \"Goddess\",\r\n      id: \"goddess\",\r\n      family: \"life\",\r\n      tier: 3,\r\n      requirements: {\r\n        life: 7,\r\n        inertia: 5,\r\n        force: 1,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    hope: {\r\n      name: \"Hope\",\r\n      id: \"hope\",\r\n      family: \"life\",\r\n      tier: 3,\r\n      requirements: {\r\n        life: 7,\r\n        inertia: 1,\r\n        force: 5,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n    splendor: {\r\n      name: \"Splendor\",\r\n      id: \"splendor\",\r\n      family: \"life\",\r\n      tier: 3,\r\n      requirements: {\r\n        life: 8,\r\n        inertia: 2,\r\n        force: 3,\r\n      },\r\n      rewards: {\r\n      },\r\n      nodes: 5,\r\n      hasChoiceNode: false,\r\n    },\r\n  }","import React from 'react';\r\nimport './App.css';\r\nimport _ from \"lodash\"\r\nimport Tippy from '@tippyjs/react';\r\nimport 'tippy.js/dist/tippy.css';\r\nimport { aspects } from \"./Data.js\" // ascension data goes there\r\nimport { result } from 'underscore';\r\n\r\n// todo:\r\n\r\n// add hoverable tooltips over each step of results display\r\n// remove self-sustain setting - DONE\r\n// revise scoring\r\n// t2s bug out in result display - NOT FIXED???, HAPPENS IN REMOVABLE ASPS ONLY\r\n// add dipping t2s, FOR THIS MAKE A HELPER FUNC FOR GENERATING T2S\r\n// revise scoring for both modes !!!, still seems inconsistent, sometimes result bugs out hard, revise path creation\r\n\r\n// something important to consider: going to grab the 2nd node of a tier 2, then backtracking to remove something\r\n// pointsNeeded calc doesnt work properly rn\r\n\r\n// maybe start building from the goal and pick aspects for embs, then go from start and try to make a real path out of that? - DONE\r\n\r\n// if lowest emb req is < number of t2s, use t2s for it and discard the emb's family, or cover it with core nodes? - SOMEWHAT DONE (not with core nodes)\r\n\r\n// after adding each new asp, make a new reqs list and only pull in relevant asps - DONE\r\n\r\nconst generateTechnicalAspects = false;\r\n\r\nconst strings = {\r\n  iterations: \"How many builds should be randomly generated. With higher amounts the search takes longer but is more likely to find the most efficient build. Keep this in the thousands, and increase it when you're doing crazy searches (3+ aspects chosen, multiple T3s, stuff like that).\",\r\n  useFullCore: \"Use a full Core instead of its lone nodes. A full Core grants 2 of each embodiment for 5 points.\",\r\n  selfSustain: \"If enabled, shows aspects which can be removed after completing the chosen aspects.\",\r\n  preference: \"Controls the scoring system for builds. The first option will make the search favor builds which require less points to sustain after removing all unnecessary aspects. The second option favors paths which require the least amount of points to reach, but may require more points to sustain.\",\r\n  considerDipping: \"If enabled, the search will include the possibility of 'dipping' into a tier 2 aspects to get the embodiment reward on their second node, for only 2 points. This is rarely ever useful for finding shortest paths. If you're using this, you should increase the 'builds to try' setting considerably.\",\r\n}\r\n\r\nString.prototype.format = function () { // by gpvos from stackoverflow\r\n  var args = arguments;\r\n  return this.replace(/\\{(\\d+)\\}/g, function (m, n) { return args[n]; });\r\n};\r\n\r\n// generate a new \"internal\" aspect for each tier 2 aspect, one for each different embodiment rewards you can choose in node 2.\r\nvar num = 999; // object key for these aspects, starts at high number to uhm... avoid any problems\r\nvar extraAspects = {};\r\n\r\nif (generateTechnicalAspects) {\r\n  for (var x in aspects) {\r\n    var aspect = aspects[x];\r\n  \r\n    if (aspect.tier == 2) {\r\n      var embs = {\r\n        force: 1,\r\n        entropy: 1,\r\n        form: 1,\r\n        inertia: 1,\r\n        life: 1,\r\n      }\r\n  \r\n      for (var z in embs) {\r\n        var newAspect = {\r\n          name: aspect.name + \" (+{0})\".format(z),\r\n          id: aspect.id, // same id so the calc function doesnt pick multiple\r\n          family: \"special\",\r\n          tier: aspect.tier,\r\n          requirements: aspect.requirements, // does this reference or copy??\r\n          rewards: {},\r\n          nodes: aspect.nodes,\r\n          hasChoiceNode: aspect.hasChoiceNode,\r\n          generated: true, // if this property exists, aspect does not render in UI\r\n          extraEmbodimentType: z,\r\n        };\r\n  \r\n        for (var v in aspect.rewards) {\r\n          newAspect.rewards[v] = aspect.rewards[v];\r\n        }\r\n  \r\n        if (newAspect.rewards[z] == undefined)\r\n          newAspect.rewards[z] = 1;\r\n        else\r\n          newAspect.rewards[z] += embs[z]; // add +1 embodiment\r\n  \r\n        num++;\r\n  \r\n        extraAspects[num] = newAspect;\r\n      }\r\n  \r\n      // generate dipping aspects, which only have 2 nodes and grant 1 embodiment\r\n      for (var b in embs) {\r\n        var newAspect = {\r\n          name: aspect.name + \" (dip, +{0})\".format(b),\r\n          id: aspect.id, // same id so the calc function doesnt pick multiple\r\n          family: \"special\",\r\n          tier: aspect.tier,\r\n          requirements: aspect.requirements,\r\n          rewards: {},\r\n          nodes: 2, // dipping aspects only have 2 nodes\r\n          hasChoiceNode: aspect.hasChoiceNode,\r\n          dipping: true,\r\n          generated: true, // if this property exists, aspect does not render in UI\r\n          extraEmbodimentType: b,\r\n        };\r\n  \r\n        newAspect.rewards[b] = 1; // tier 2 dips reward 1 embodiment\r\n  \r\n        num++;\r\n  \r\n        extraAspects[num] = newAspect;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfor (var x in extraAspects) { // gotta do this here because we cannot change an object while we're iterating through it\r\n  aspects[x] = extraAspects[x];\r\n}\r\n\r\n// calculate embodiments rewarded per Ascension point spent\r\nfor (var x in aspects) {\r\n  var aspect = aspects[x];\r\n  aspect.rewardsPerPoint = {};\r\n  aspect.totalRequirements = 0;\r\n\r\n  for (var y in aspect.rewards) {\r\n    aspect.rewardsPerPoint[y] = aspect.rewards[y] / aspect.nodes\r\n  }\r\n\r\n  // total embodiment req\r\n  for (var z in aspect.requirements) {\r\n    aspect.totalRequirements += aspect.requirements[z];\r\n  }\r\n}\r\n\r\nclass Checkbox extends React.Component {\r\n  toggle() {\r\n    if (this.props.app.state.selection.includes(this.props.data)) {\r\n      this.props.app.updateSelection(this.props.data, null)\r\n\r\n      if (!this.props.data.isCoreNode && this.props.data.tier != 3)\r\n        this.props.app.updateExclusion(this.props.data, null)\r\n    }\r\n    else if (this.props.app.state.excluded.includes(this.props.data)) {\r\n      this.props.app.updateExclusion(this.props.data, null)\r\n    }\r\n    else {\r\n      this.props.app.updateSelection(this.props.data, null);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var state = \"checkbox \";\r\n    var text = \"\"\r\n\r\n    // disable onClick if this is a core node and we're using full core\r\n    let onClick = (this.props.data.isCoreNode != undefined && this.props.app.state.useFullCore) ? null : () => this.toggle()\r\n\r\n    if (this.props.data.isCoreNode != undefined && this.props.app.state.useFullCore) {\r\n      state += \"chk-grey\"\r\n      text = \"\"\r\n    }\r\n    else if (this.props.app.state.selection.includes(this.props.data)) {\r\n      state += \"chk-green\"\r\n      text = \"\"\r\n    }\r\n    else if (this.props.app.state.excluded.includes(this.props.data)) {\r\n      state += \"chk-red\"\r\n      text = \"\"\r\n    }\r\n\r\n    return (\r\n      <div className={\"unselectable \" + state + \" \" + (this.props.darkMode ? \"dark-mode-checkbox\" : \"\")} onClick={onClick}>\r\n        <p>{text}</p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass Embodiment extends React.Component {\r\n  render() {\r\n    return (\r\n    <div className={\"embodiment \" + this.props.type + ((this.props.darkMode) ? \" dark-mode-embodiment\" : \" \")}>\r\n      <p className={(this.props.darkMode ? \"dark-mode-text\" : \"\")}>{this.props.amount}</p>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass Aspect extends React.Component {\r\n  getRequirementsText() {\r\n    var elements = [];\r\n\r\n    for (var x in this.props.data.requirements) {\r\n      var amount = this.props.data.requirements[x]\r\n      var element;\r\n      var type = x; // serves to figure out css class\r\n      let darkMode = (this.props.darkMode)\r\n\r\n      element = <Embodiment key={x} darkMode={darkMode} type={type} amount={amount}/>\r\n      elements.push(element);\r\n    }\r\n\r\n    return elements;\r\n  }\r\n\r\n  getRewards() {\r\n    var text = [];\r\n    var embs = {\r\n      force: 0,\r\n      entropy: 0,\r\n      form: 0,\r\n      inertia: 0,\r\n      life: 0,\r\n    }\r\n\r\n    for (var x in this.props.data.rewards) {\r\n      var amount = this.props.data.rewards[x]\r\n      embs[x] = amount;\r\n    }\r\n\r\n    // don't even show the header for tier 3 aspects\r\n    var header = (this.props.data.tier != 3) ? \"Completion rewards:\" : \"\";\r\n    for (var z in embs) {\r\n      if (embs[z] != 0)\r\n        text.push(<p key={this.props.data.name + \"_tooltip_\" + z}>{embs[z] + \" \" + capitalizeFirstLetter(z)}</p>);\r\n    }\r\n\r\n    return <div>\r\n      <p>{header}</p>\r\n      <div>{text}</div>\r\n    </div>;\r\n  }\r\n\r\n  getTooltip() {\r\n    var name = this.props.data.name\r\n    var cost = this.props.data.nodes;\r\n    var rewards = this.getRewards();\r\n    var nodeText = ((this.props.data.nodes > 1) ? \" ({0} nodes)\" : \" ({0} node)\").format(cost)\r\n    \r\n    // note to self, dont nest <p> elements accidentally\r\n    return (<div className=\"tooltip\">\r\n        <p className=\"tooltip\">{name + nodeText}<br /></p>\r\n        {rewards}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Tippy content={this.getTooltip()} placement=\"bottom\" duration=\"0\">\r\n        <div className=\"aspect unselectable\">\r\n          <Checkbox data={this.props.data} app={this.props.app} darkMode={this.props.darkMode}></Checkbox>\r\n          <p className={(this.props.darkMode ? \"dark-mode-text\" : \"\")}>{this.props.data.name}</p>\r\n          <div className=\"embodiments-box\">\r\n            {this.getRequirementsText()}\r\n          </div>\r\n        </div>\r\n      </Tippy>\r\n    )\r\n  }\r\n}\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selection: [],\r\n      excluded: [], // excluded aspects\r\n      result: null,\r\n      waiting: false,\r\n      useFullCore: false,\r\n      considerDipping: false,\r\n      selfSustain: true,\r\n      pointsBudget: 26,\r\n      preference: \"0\", // scoring mode\r\n      iterations: 30000, // how many random builds are generated and compared\r\n      maximumOutputs: 10,\r\n      resultIndex: 0,\r\n      darkMode: false,\r\n    }\r\n\r\n    if (window.localStorage.getItem(\"darkMode\") == \"true\")\r\n      this.state.darkMode = true;\r\n  }\r\n\r\n  changeIndex(change) {\r\n    let current = this.state.resultIndex;\r\n    current += change;\r\n    if (current > this.state.result.bestPaths.length-1)\r\n      current = 0;\r\n    else if (current < 0)\r\n      current = this.state.result.bestPaths.length-1;\r\n\r\n    this.setState({\r\n      resultIndex: current,\r\n    })\r\n  }\r\n\r\n  filterApplicableAspects(list) { // list is chosen aspects\r\n\r\n    var realList = [];\r\n    var excludedAspects = [];\r\n    for (var n = 0; n < this.state.excluded.length; n++) {\r\n      excludedAspects.push(this.state.excluded[n].id)\r\n    }\r\n    \r\n    for (var x = 0; x < list.length; x++) { // this works\r\n      var aspect = list[x];\r\n\r\n      // exclude individual core nodes if we're using full core\r\n      if (aspect.isCoreNode != undefined && this.state.useFullCore) {\r\n\r\n      }\r\n      else\r\n        realList.push(aspect); // we dont split t2s up here anymore\r\n      // if (aspect.tier == 2) {\r\n      //   for (var z in aspects) {\r\n      //     var asp = aspects[z];\r\n\r\n      //     if (asp.id == aspect.id && asp.generated == true) {\r\n      //       realList.push(asp);\r\n      //     }\r\n      //   }\r\n      // }\r\n      // else {\r\n      //   realList.push(aspect);\r\n      // }\r\n    }\r\n\r\n    // add the full core to the list of user chosen aspects if we're using it\r\n    if (this.state.useFullCore) {\r\n      realList.push(aspects.core_full);\r\n    }\r\n\r\n    list = realList;\r\n\r\n    var newList = {}\r\n    var reqs = {\r\n      force: 0,\r\n      entropy: 0,\r\n      form: 0,\r\n      inertia: 0,\r\n      life: 0,\r\n    }\r\n\r\n    function hasRelevantReward(aspect, reqs) {\r\n      for (var x in aspect.rewards) {\r\n        var reward = aspect.rewards[x];\r\n\r\n        if (excludedAspects.includes(aspect.id)) // excluded aspects\r\n          return false;\r\n\r\n        if (aspect.dipping && !this.state.considerDipping)\r\n          return false;\r\n\r\n        // !!! always ignore base tier 2s !!!, use only the generated versions, which have the +embodiment node considered\r\n        // if (aspect.tier == 2 && aspect.generated == undefined)\r\n        //   return false;\r\n\r\n        // core handling. (do we need handling for the edge case where the calc chooses all 5 cores in non-core mode? probably. TODO)\r\n        if (aspect.id == \"core_full\" && !this.state.useFullCore)\r\n          return false;\r\n        else if (aspect.isCoreNode && this.state.useFullCore)\r\n          return false;\r\n\r\n        // filter out t2 variants that don't have a relevant +emb\r\n        if (aspect.generated != undefined && reqs[aspect.extraEmbodimentType] == 0)\r\n          return false;\r\n\r\n        // if an aspect rewards a type of embodiment we need, it's valid. Otherwise we discard it\r\n        if (reward > 0 && reqs[x] > 0)\r\n          return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    // check what embodiment types we need\r\n    for (var z in list) {\r\n      var aspect = list[z];\r\n\r\n      reqs.force = (aspect.requirements.force > reqs.force) ? aspect.requirements.force : reqs.force;\r\n\r\n      reqs.entropy = (aspect.requirements.entropy > reqs.entropy) ? aspect.requirements.entropy : reqs.entropy;\r\n\r\n      reqs.form = (aspect.requirements.form > reqs.form) ? aspect.requirements.form : reqs.form;\r\n\r\n      reqs.inertia = (aspect.requirements.inertia > reqs.inertia) ? aspect.requirements.inertia : reqs.inertia;\r\n\r\n      reqs.life = (aspect.requirements.life > reqs.life) ? aspect.requirements.life : reqs.life;\r\n    }\r\n\r\n    for (var x in aspects) {\r\n      var aspect = aspects[x];\r\n\r\n      const func = hasRelevantReward.bind(this);\r\n      if (func(aspect, reqs)) {\r\n        newList[x] = aspect;\r\n      }\r\n    }\r\n\r\n    // make sure the aspects we have chosen don't get filtered out.\r\n    // note to self: how the fuck does this avoid base t2s?\r\n    for (var y in list) {\r\n      if (!newList.hasOwnProperty(list[y].id))\r\n        newList[list[y].id] = list[y];\r\n    }\r\n\r\n    var highestReq = 0;\r\n    var aspectWithHighestRequirements;\r\n\r\n    for (var i in newList) {\r\n      if (newList[i].totalRequirements > highestReq)\r\n        aspectWithHighestRequirements = newList[i];\r\n    }\r\n\r\n    var chosenAspects = {}; // turn it into object and filter out irrelevant t2 variants\r\n    for (var b = 0; b < list.length; b++) {\r\n      var asp = list[b]\r\n      if ((asp.generated != undefined && reqs[asp.extraEmbodimentType] == 0) || asp.dipping != undefined) {\r\n        //console.log(\"unneeded \" + asp.name)\r\n      }\r\n      else\r\n        chosenAspects[b] = list[b];\r\n    }\r\n\r\n    this.setState({\r\n      waiting: true,\r\n    })\r\n\r\n    return { // this works\r\n      reqs: reqs,\r\n      aspects: newList,\r\n      chosenAspects: chosenAspects,\r\n      aspectWithHighestRequirements: aspectWithHighestRequirements,\r\n    };\r\n  }\r\n\r\n  async calculateV2() {\r\n    // step 1: make a list of relevant aspects and gather the total embodiment requirements\r\n    var data = this.filterApplicableAspects(this.state.selection);\r\n    data.chosenAspects = _.cloneDeep(data.chosenAspects)\r\n    console.log(data.chosenAspects);\r\n    // quit if nothing was selected\r\n    if (Object.keys(data.chosenAspects).length == 0)\r\n      return;\r\n\r\n    // warn if the user has excluded a lot of aspects\r\n    if (this.state.excluded.length >= 6)\r\n      if (!window.confirm(\"You've excluded a lot of aspects. I haven't implemented failsafes for that so if you continue, the webpage may freeze if there is literally no way to build towards the goal. Just a warnin'.\"))\r\n        return;\r\n    \r\n    var reqs = getTotalReqs(data.chosenAspects);\r\n\r\n    var relevantEmbodiments = []; // works\r\n    for (let x in reqs) {\r\n      if (reqs[x] > 0)\r\n        relevantEmbodiments.push(x);\r\n    }\r\n\r\n    var chosenAspects = [] // we \"shuffle\" this.\r\n    var buildWithChosenAspects = [];\r\n    for (let x in data.chosenAspects) {\r\n      chosenAspects.push(data.chosenAspects[x]);\r\n      buildWithChosenAspects.push(data.chosenAspects[x])\r\n    }\r\n\r\n    var validBuilds = []; // valid self-sustainable builds\r\n\r\n    function getRemainingReqs(build, deleteUnused=false) {\r\n      let reqs = getTotalReqs(build);\r\n\r\n      for (let x in build) {\r\n        let asp = build[x]\r\n        for (let z in asp.rewards) {\r\n          reqs[z] -= asp.rewards[z];\r\n        }\r\n      }\r\n\r\n      if (deleteUnused) {\r\n        for (let x in reqs) {\r\n          if (reqs[x] < 1) {\r\n            delete reqs[x]\r\n          }\r\n        }\r\n      }\r\n\r\n      return reqs;\r\n    }\r\n\r\n    function hasRelevantRewards(asp, reqs) {\r\n      for (let x in reqs) {\r\n        if (asp.rewards[x] != undefined) {\r\n          if (asp.rewards[x] > 0)\r\n            return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    function includesAspect(build, asp) {\r\n      for (let x in build) {\r\n        if (build[x].id == asp.id)\r\n          return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    var tier1s = []; // todo use these?\r\n    for (let x in data.aspects) {\r\n      if (data.aspects[x].tier == 1)\r\n        tier1s.push(data.aspects[x])\r\n    }\r\n\r\n    console.log(data.aspects);\r\n\r\n    // new build\r\n    for (let x = 0; x < this.state.iterations; x++) {\r\n      let chosenAspects = _.cloneDeep(buildWithChosenAspects);\r\n      let aspects = _.cloneDeep(data.aspects);\r\n      //var selfSustainBuild = [...buildWithChosenAspects]\r\n      var selfSustainBuild = [];\r\n\r\n      for (let x in chosenAspects) {\r\n        let asp = chosenAspects[x]\r\n        if (asp.tier == 2) {\r\n          let embBonus = _.sample(relevantEmbodiments)\r\n\r\n          asp.rewards[embBonus] = (asp.rewards[embBonus] == undefined) ? 1 : asp.rewards[embBonus] + 1;\r\n          asp.name += \" (+\" + embBonus + \")\"\r\n        }\r\n        selfSustainBuild.push(asp);\r\n      }\r\n\r\n      for (let x = 0; x < 1000; x++) { // getting rest of aspects needed to selfsustain\r\n        if (selfSustainBuild.length >= 10)\r\n          break;\r\n\r\n        let reqs = getRemainingReqs(selfSustainBuild);\r\n\r\n        // check if we're done\r\n        if (fullfillsRequirements(selfSustainBuild)) {\r\n          // if (!validBuilds.includes(selfSustainBuild)) // no idea if this works\r\n          validBuilds.push(selfSustainBuild);\r\n          break;\r\n        }\r\n        else { // else pick random asp and check again\r\n          let asp = _.sample(aspects);\r\n\r\n          if (hasRelevantRewards(asp, reqs) && !includesAspect(selfSustainBuild, asp)) {\r\n            if (asp.tier == 2) {\r\n              let embBonus = _.sample(relevantEmbodiments)\r\n\r\n              if (embBonus != undefined) {\r\n                asp.rewards[embBonus] = (asp.rewards[embBonus] == undefined) ? 1 : asp.rewards[embBonus] + 1;\r\n                asp.name += \" (+\" + embBonus + \")\"\r\n\r\n                selfSustainBuild.push(asp);\r\n              }\r\n            }\r\n            else {\r\n              selfSustainBuild.push(asp);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    var bestBuilds = [];\r\n    var bestPoints = null;\r\n    for (let x in validBuilds) { // filter them down to the most point-efficient ones\r\n      let build = validBuilds[x]\r\n      let pointsNeeded = getTotalPoints(build)\r\n\r\n      if (bestBuilds.length == 0) {\r\n        bestBuilds.push(build);\r\n        bestPoints = pointsNeeded;\r\n      }\r\n      else if (pointsNeeded < bestPoints) {\r\n        bestBuilds = [build]; // CAREFUL! PREV WE WERE SETTING THIS TO []\r\n        bestPoints = pointsNeeded;\r\n      }\r\n      else if (pointsNeeded == bestPoints && bestBuilds.length <= this.state.maximumOutputs) {\r\n        bestBuilds.push(build);\r\n      }\r\n    }\r\n\r\n    console.log(bestBuilds);\r\n    console.log(bestPoints);\r\n\r\n    var bestPaths = [];\r\n    var bestPathsPoints = null;\r\n\r\n    for (let x in bestBuilds) { // todo: revise if it rand picks the same way of calcV1, then filter the fastest paths\r\n      let keyAspects = bestBuilds[x];\r\n      let aspects = _.cloneDeep(data.aspects);\r\n      let path = [];\r\n      let build = [];\r\n      let keys = 0;\r\n\r\n      for (let z = 0; z < this.state.iterations/3; z++) {\r\n        for (let c in keyAspects) {\r\n          let asp = keyAspects[c]\r\n          if (fullfillsRequirements(build, [asp]) && !includesAspect(build, asp)) {\r\n            console.log(\"picked \" + asp.name + \" (goal) because reqs were fulfilled\")\r\n\r\n            build.push(asp);\r\n            path.push({\r\n              aspect: asp,\r\n              role: (includesAspect(data.chosenAspects, asp)) ? \"goal\" : \"key\", // todo distinguish goal and key\r\n            });\r\n\r\n            keys++;\r\n          }\r\n        }\r\n\r\n        // check if we got everything\r\n        if (keys === keyAspects.length) {\r\n          break;\r\n        }\r\n        else {\r\n          let asp = _.sample(aspects);\r\n          let relevantEmbodiments = getRemainingReqs(keyAspects, true);\r\n          // let relevantEmbodiments = getRemainingReqs(build); // this was a problem, we're checking the reqs of what we're building...\r\n\r\n          if (hasRelevantRewards(asp, reqs) && !includesAspect(build, asp) && fullfillsRequirements(build, [asp])) {\r\n            if (asp.tier == 2) {\r\n              let embBonus = _.sample(relevantEmbodiments)\r\n\r\n              //console.log(embBonus)\r\n\r\n              if (embBonus != undefined) {\r\n                asp.rewards[embBonus] = (asp.rewards[embBonus] == undefined) ? 1 : asp.rewards[embBonus] + 1;\r\n                asp.name += \" (+\" + embBonus + \")\"\r\n\r\n                build.push(asp);\r\n\r\n                path.push({\r\n                  aspect: asp,\r\n                  role: \"removable\"\r\n                })\r\n              }\r\n            }\r\n            else {\r\n              build.push(asp);\r\n\r\n              path.push({\r\n                aspect: asp,\r\n                role: \"removable\"\r\n              })\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let z = 0; z < path.length; z++) {\r\n        if (path[z].role == \"removable\") {\r\n          path.push({\r\n            aspect: path[z].aspect,\r\n            role: \"remove\",\r\n          })\r\n        }\r\n      }\r\n\r\n      let points = getTotalPoints(build);\r\n\r\n      if (bestPaths.length == 0) {\r\n        bestPaths.push(path);\r\n        bestPathsPoints = points;\r\n      }\r\n      else if (points < bestPathsPoints) {\r\n        bestPaths = [path];\r\n        bestPathsPoints = points;\r\n      }\r\n      else if (points == bestPathsPoints) {\r\n        bestPaths.push(path);\r\n      }\r\n    }\r\n\r\n    var pathIds = []\r\n    var duplicates = []\r\n\r\n    // filter out duplicates\r\n    for (let x in bestPaths) {\r\n      let pathId = []\r\n\r\n      for (let z in bestPaths[x]) {\r\n        let asp = bestPaths[x][z].aspect;\r\n        pathId.push(asp.id)\r\n      }\r\n\r\n      pathId.sort();\r\n\r\n      if (pathIds.length == 0)\r\n        pathIds.push(pathId)\r\n      else {\r\n        for (let z in pathIds) {\r\n          if (pathIds[z] == pathId) {\r\n            pathIds.push(pathId)\r\n          }\r\n          else {\r\n            duplicates.push(bestPaths[x])\r\n          }\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\n    bestPaths = bestPaths.filter(function(item){\r\n      return !duplicates.includes(item);\r\n    })\r\n\r\n    console.log(\"Paths:\")\r\n    console.log(bestPaths)\r\n\r\n    var result = {\r\n      bestBuilds: bestBuilds,\r\n      buildPoints: bestPoints,\r\n      selfSustainPoints: bestPoints,\r\n      bestPaths: bestPaths,\r\n      pathPoints: bestPathsPoints,\r\n    }\r\n\r\n    //return result;\r\n    this.setState({\r\n      result: result,\r\n      resultIndex: 0,\r\n    })\r\n  }\r\n\r\n  async calculate() {\r\n    // step 1: make a list of relevant aspects and gather the total embodiment requirements\r\n    var data = this.filterApplicableAspects(this.state.selection);\r\n    console.log(data.chosenAspects)\r\n\r\n    // warn if the user has excluded a lot of aspects\r\n    if (this.state.excluded.length >= 6)\r\n      if (!window.confirm(\"You've excluded a lot of aspects. I haven't implemented failsafes for that so if you continue, the webpage may freeze if there is literally no way to build towards the goal. Just a warnin'.\"))\r\n        return;\r\n\r\n    var bestBuild;\r\n\r\n    // quit if nothing was selected\r\n    if (Object.keys(data.chosenAspects).length == 0)\r\n      return;\r\n\r\n    // step 2: create random builds and save the most point-efficient one\r\n    for (var iteration = 0; iteration < this.state.iterations; iteration++) {\r\n      var aspects = data.aspects;\r\n      var chosenAspects = [] // we \"shuffle\" this.\r\n      for (var x in data.chosenAspects) {\r\n        chosenAspects.push(data.chosenAspects[x]);\r\n      }\r\n      shuffle(chosenAspects);\r\n\r\n      var build = [];\r\n\r\n      var availableAspects = {}; // unnecessary? we dont edit this list\r\n      for (var u in aspects) {\r\n        availableAspects[u] = aspects[u]\r\n      }\r\n\r\n      for (var attempts = 0; attempts < 2000; attempts++) {\r\n\r\n        // pick random aspect\r\n        var aspect = _.sample(availableAspects)\r\n        var skipRandomChoice = false;\r\n\r\n        //CHECK IF WE MEET THE REQS FOR THE PLAYER-PICKED NODES, AND IF SO, START PUTTING THOSE IN AND IGNORE THE RANDOMLY PICKED ASPECT\r\n        var breakThis = false;\r\n        for (var v in chosenAspects) {\r\n          if (breakThis)\r\n            break;\r\n          \r\n          var chosenAspect = chosenAspects[v]\r\n\r\n          if (fullfillsRequirements(build, {chosenAspect}) && !aspectAlreadyPicked(build, chosenAspect)) {\r\n            build.push(chosenAspect)\r\n\r\n            skipRandomChoice = true;\r\n\r\n            //console.log(\"picked \" + chosenAspect.name + \" (goal) because reqs were fulfilled\")\r\n\r\n            // if one of the goals was a t2, remove the variants of it from the list of goals\r\n            if (chosenAspect.tier == 2) {\r\n              var newGoals = []\r\n\r\n              for (var z in chosenAspects) {\r\n                var asp = chosenAspects[z];\r\n                if (asp.id == chosenAspect.id && asp != chosenAspect) {\r\n                  //console.log(\"removed \" + asp.name)\r\n                }\r\n                else {\r\n                  newGoals.push(asp);\r\n                }\r\n              }\r\n\r\n              chosenAspects = newGoals;\r\n\r\n              breakThis = true; // can we just replace this with break?\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!skipRandomChoice) {\r\n          // choose it if we can and if we dont already have it in some way (relevant for t2s)\r\n          if (fullfillsRequirements(build, {aspect}) && !aspectAlreadyPicked(build, aspect)) {\r\n            build.push(aspect)\r\n\r\n            //console.log(\"picked \" + aspect.name)\r\n          }\r\n        }\r\n\r\n        // check if we got all the nodes we wanted\r\n        var allChosenNodesObtained = false;\r\n        for (var n in chosenAspects) {\r\n          if (!build.includes(chosenAspects[n])) {\r\n            allChosenNodesObtained = false;\r\n            break;\r\n          }\r\n\r\n          allChosenNodesObtained = true;\r\n        }\r\n\r\n        // self-sustaining\r\n        // TODO MAKE IT TRY TO REMOVE THE MOST COSTLY ONES FIRST - to do this, first make an ordered list of aspects from most costly to cheapest\r\n        var aspectsToRemove = [];\r\n        var filteredBuild = build;\r\n        if (allChosenNodesObtained && this.state.selfSustain) {\r\n          // for (var x = 0; x < build.length; x++) {\r\n          //   var asp = build[x];\r\n          //   var buildWithoutThat = filteredBuild.filter(function(val) {return val != asp });\r\n\r\n          //   if (fullfillsRequirements(buildWithoutThat) && !isInObject(asp, data.chosenAspects) && filteredBuild.includes(asp)) {\r\n          //     aspectsToRemove.push(asp);\r\n          //     filteredBuild = filteredBuild.filter(function(val) {return val != asp });\r\n          //   }\r\n          // }\r\n\r\n          for (var x = build.length; x >= 0; x--) {\r\n            var asp = build[x];\r\n            var earliestTimeToRemove = null;\r\n            if (!isInObject(asp, data.chosenAspects)) { // are we checking the right thing here?\r\n              var buildWithoutThat = filteredBuild.filter(function(val) {return val != asp });\r\n              for (var z = build.length; z >= 0; z--) {\r\n                if (fullfillsRequirements(buildWithoutThat) && filteredBuild.includes(asp)) {\r\n                  aspectsToRemove.push({\r\n                    aspect: asp,\r\n                    time: z});\r\n                  filteredBuild = filteredBuild.filter(function(val) {return val != asp });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // break if we finished picking aspects for this build\r\n        if (allChosenNodesObtained)\r\n          break;\r\n      }\r\n\r\n      // < ! > Sometimes a build comes up with 0 aspects and points. I assume this happens when the find-aspects loop has finished and somehow, miraculously, all attempts to find a starting point for the build have failed.\r\n      if (build.length != 0) {\r\n        console.log(build);\r\n        var pathOperationOrder = GetPathOperationOrder(build, aspectsToRemove)\r\n        //var pointsToReach = GetMinimumPoints(pathOperationOrder);\r\n        var pointsToReach = getTotalPoints(build)\r\n        var pointsToSustain = getTotalPoints(filteredBuild)\r\n\r\n        var buildInfo = {\r\n          aspects: build,\r\n          aspectsToRemove: aspectsToRemove,\r\n          pathOperationOrder: pathOperationOrder,\r\n          points: pointsToReach,\r\n          finalCost: pointsToSustain,\r\n          score: pointsToReach + pointsToSustain + ((this.state.preference == \"0\") ? 0 : build.length), // less aspects = better, discourages needlessly picking builds only to despec them later\r\n          totalEmbodiments: getTotalRewards(build),\r\n        }\r\n\r\n        // check if new build is more point-efficient or tied, in which case we keep both tracked\r\n        if (bestBuild == undefined)\r\n          bestBuild = buildInfo;\r\n        else if (buildInfo.score < bestBuild.score && buildInfo.points <= this.state.pointsBudget) // favoring only finalCost doesnt really work, it picks 50-point builds\r\n          bestBuild = buildInfo;\r\n      }\r\n    }\r\n\r\n    console.log(\"--- Best Build ---\")\r\n    console.log(bestBuild);\r\n\r\n    this.setState({\r\n      result: bestBuild,\r\n      waiting: false,\r\n    })\r\n  }\r\n\r\n  // add/remove aspects to the list of aspects we want to calculate, called by the checkboxes\r\n  updateSelection(aspect, e) {\r\n    var selection = this.state.selection.slice();\r\n\r\n    if (!selection.includes(aspect))\r\n      selection.push(aspect);\r\n    else\r\n      selection = selection.filter(function(val, index, arr){ return val != aspect })\r\n\r\n    this.setState({\r\n      selection: selection\r\n    })\r\n  }\r\n\r\n  updateExclusion(aspect, e) {\r\n    var selection = this.state.excluded.slice();\r\n\r\n    if (!selection.includes(aspect))\r\n      selection.push(aspect);\r\n    else\r\n      selection = selection.filter(function(val, index, arr){ return val != aspect })\r\n\r\n    this.setState({\r\n      excluded: selection\r\n    })\r\n  }\r\n\r\n  render() {\r\n    var forceAspects = [];\r\n    var entropyAspects = [];\r\n    var formAspects = [];\r\n    var inertiaAspects = [];\r\n    var lifeAspects = [];\r\n\r\n    // dark mode\r\n    let textClass = \"\"\r\n    let checkboxClass = \"\"\r\n    if (this.state.darkMode) {\r\n      document.getElementsByTagName(\"body\")[0].classList = \"dark-bg\"\r\n      textClass += \"dark-mode-text\"\r\n      checkboxClass += \"dark-mode-checkbox\"\r\n    }\r\n    else {\r\n      document.getElementsByTagName(\"body\")[0].classList = \"\"\r\n    }\r\n\r\n    // aspect elements\r\n    for (var x in aspects) {\r\n      var aspect = aspects[x];\r\n      var currentAspect;\r\n\r\n      var element = <Aspect\r\n      darkMode={this.state.darkMode} \r\n      data={aspect}\r\n      key={x}\r\n      clickCallback={this.updateSelection.bind(this)}\r\n      app={this}\r\n      />\r\n\r\n      var hr = <hr key={x + \"_hr\"}></hr>;\r\n\r\n      if (aspect.generated == undefined) { // don't display \"technical\" aspects\r\n        switch (aspect.family) {\r\n          case \"force\":\r\n            currentAspect = forceAspects;\r\n            break;\r\n          case \"entropy\":\r\n            currentAspect = entropyAspects;\r\n            break;\r\n          case \"form\":\r\n            currentAspect = formAspects;\r\n            break;\r\n          case \"inertia\":\r\n            currentAspect = inertiaAspects;\r\n            break;\r\n          case \"life\":\r\n            currentAspect = lifeAspects;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (currentAspect != undefined) {\r\n        if (currentAspect != undefined && currentAspect.generated == undefined)\r\n          currentAspect.push(element);\r\n\r\n        var aspectsAfterWhichWePutAnHrSoThingsLookNice = [\r\n          \"core_force\",\r\n          \"serpent\",\r\n          \"tiger\",\r\n          \"core_entropy\",\r\n          \"wolf\",\r\n          \"supplicant\",\r\n          \"core_form\",\r\n          \"silkworm\",\r\n          \"wealth\",\r\n          \"core_inertia\",\r\n          \"guardsman\",\r\n          \"rhinoceros\",\r\n          \"core_life\",\r\n          \"rabbit\",\r\n          \"stag\",\r\n        ]\r\n        if (aspectsAfterWhichWePutAnHrSoThingsLookNice.includes(aspect.id) && currentAspect.generated == undefined)\r\n          currentAspect.push(hr);\r\n        }\r\n    }\r\n\r\n    // display requirements and rewards of chosen aspects\r\n    var requirementsInfo = null;\r\n    if (this.state.selection.length > 0 || this.state.useFullCore) {\r\n      // consider the core. it's not usually in selection and is instead added during filtering\r\n      let selection = this.state.selection.slice();\r\n      if (this.state.useFullCore) {\r\n        selection.push(aspects.core_full)\r\n        selection = selection.filter(function(item) {return item.isCoreNode == undefined})\r\n      }\r\n\r\n      let reqs = getTotalReqs(selection, true)\r\n      let rewards = getTotalRewards(selection, true, true)\r\n      let nodes = getTotalPoints(selection)\r\n\r\n      let reqEmbs = []\r\n      let rewEmbs = []\r\n      let pointsText = <p className={textClass} style={{marginLeft: \"0px\"}}>{\", nodes: {0}\".format(nodes)}</p>\r\n      var key = 0;\r\n\r\n      for (let x in reqs) {\r\n        reqEmbs.push(<Embodiment\r\n          key={key}\r\n          type={x}\r\n          amount={reqs[x]}\r\n          darkMode={this.state.darkMode}\r\n        />)\r\n        key++;\r\n      }\r\n      if (reqEmbs.length == 0) {\r\n        reqEmbs.push(<p className={textClass} style={{marginLeft: \"5px\"}}>none</p>)\r\n      }\r\n\r\n      for (let x in rewards) {\r\n        if (x == \"any\") {\r\n          rewEmbs.push(<p key={key} className={textClass}>{\", {0} any\".format(rewards[x])}</p>)\r\n        }\r\n        else {\r\n          rewEmbs.push(<Embodiment\r\n            key={key}\r\n            type={x}\r\n            amount={rewards[x]}\r\n            darkMode={this.state.darkMode}\r\n          />)\r\n        }\r\n        key++;\r\n      }\r\n      if (rewEmbs.length == 0) {\r\n        rewEmbs.push(<p className={textClass} style={{marginLeft: \"5px\"}}>none.</p>)\r\n      }\r\n\r\n      requirementsInfo = <div className=\"flexbox-horizontal\">\r\n        <p className={textClass}>{\"Requirements of chosen aspects: \"}</p>\r\n        {reqEmbs}\r\n        <p className={textClass}>{\", rewards:\"}</p>\r\n        {rewEmbs}\r\n        {pointsText}\r\n      </div>\r\n    }\r\n\r\n    var text = [];\r\n    if (this.state.result != null) {\r\n      let header = ((this.state.result.bestPaths.length > 1) ? \"{0} paths found\" : \"{0} path found\").format(this.state.result.bestPaths.length) + \" ({0} points to sustain)\".format(this.state.result.buildPoints)\r\n\r\n      var resultsPanel = <div className=\"flexbox-horizontal\">\r\n        {(this.state.result.bestPaths.length > 1) ? <button className=\"arrow-button\" onClick={() => this.changeIndex(1)}>{\"<\"}</button> : null}\r\n        <p className={textClass}>{header}</p>\r\n        {(this.state.result.bestPaths.length > 1) ? <button className=\"arrow-button\" onClick={() => this.changeIndex(-1)}>{\">\"}</button> : null}\r\n      </div>\r\n\r\n      var path = this.state.result.bestPaths[this.state.resultIndex];\r\n      let darkModeClass = this.state.darkMode ? \"-dark-mode\" : \"\"\r\n\r\n      for (let x in path) {\r\n        let element = path[x];\r\n\r\n        switch(element.role) {\r\n          case \"goal\": {\r\n            text.push(<p className={\"result-goal\" + darkModeClass} key={x}>{element.aspect.name}</p>)\r\n            break;\r\n          }\r\n          case \"removable\": {\r\n            text.push(<p className={\"result-removable\" + darkModeClass} key={x}>{element.aspect.name}</p>)\r\n            break;\r\n          }\r\n          case \"remove\": {\r\n            text.push(<p className={\"result-removable\" + darkModeClass} key={x}>{\" \" + element.aspect.name}</p>)\r\n            break;\r\n          }\r\n          case \"key\": {\r\n            text.push(<p className={\"result-key\" + darkModeClass} key={x}>{element.aspect.name}</p>)\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (x != path.length - 1)\r\n          text.push(<p className={\"result-arrow\" + darkModeClass} key={-x-1}>{\" -> \"}</p>)\r\n      }\r\n    }\r\n    else\r\n      var resultsPanel = null;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"table\">\r\n          <div className=\"aspect-column\">\r\n            {forceAspects}\r\n          </div>\r\n          <div className=\"aspect-column\">\r\n            {entropyAspects}\r\n          </div>\r\n          <div className=\"aspect-column\">\r\n            {formAspects}\r\n          </div>\r\n          <div className=\"aspect-column\">\r\n            {inertiaAspects}\r\n          </div>\r\n          <div className=\"aspect-column\">\r\n            {lifeAspects}\r\n          </div>\r\n        </div>\r\n        <div className=\"bottom-interface\">\r\n          <Tippy content={strings.iterations} placement=\"bottom\" duration=\"0\">\r\n            <div className=\"num-input\">\r\n              <p className={textClass}>Builds to try:</p>\r\n              <input type=\"val\" value={this.state.iterations} onChange={(e) => this.setState({iterations: e.target.value})}></input>\r\n            </div>\r\n          </Tippy>\r\n          <Tippy content={strings.useFullCore} placement=\"bottom\" duration=\"0\">\r\n            <div className=\"checkbox-bottom-ui\">\r\n              <input type=\"checkbox\" checked={this.state.useFullCore} onChange={(e) => this.setState({useFullCore: e.target.checked})}></input>\r\n              <p className={textClass}>Use a full Core</p>\r\n            </div>\r\n          </Tippy>\r\n          {/* <Tippy content={strings.considerDipping} placement=\"bottom\" duration=\"0\">\r\n            <div className=\"checkbox-bottom-ui\">\r\n              <input type=\"checkbox\" checked={this.state.considerDipping} onChange={(e) => this.setState({considerDipping: e.target.checked})}></input>\r\n              <p className={textClass}>Consider dipping tier 2 aspects</p>\r\n            </div>\r\n          </Tippy> */}\r\n          {/* <Tippy content={strings.selfSustain} placement=\"bottom\" duration=\"0\">\r\n            <div className=\"checkbox-bottom-ui\">\r\n              <input type=\"checkbox\" checked={this.state.selfSustain} onChange={(e) => this.setState({selfSustain: e.target.checked})}></input>\r\n              <p>Self-sustain</p>\r\n            </div>\r\n          </Tippy> */}\r\n          <Tippy content={\"Change the UI to be dark.\"} placement=\"bottom\" duration=\"0\">\r\n          <div className=\"checkbox-bottom-ui\">\r\n              <input type=\"checkbox\" checked={this.state.darkMode} onChange={(e) => {this.setState({darkMode: e.target.checked}); window.localStorage.setItem(\"darkMode\", e.target.checked)}}></input>\r\n              <p className={textClass}>Dark mode</p>\r\n            </div>\r\n          </Tippy>\r\n          {/* <Tippy content={strings.preference} placement=\"bottom\" duration=\"0\">\r\n            <div className=\"dropdown\">\r\n              <select onChange={(e) => this.setState({preference: e.target.value})}>\r\n                <option value=\"0\">Prefer builds with lower final cost</option>\r\n                <option value=\"1\">Prefer builds with fewer points needed to reach</option>\r\n              </select>\r\n            </div>\r\n          </Tippy> */}\r\n        </div>\r\n        <div className=\"bottom-interface column\">\r\n          {requirementsInfo}\r\n          <button onClick={() => this.calculateV2()}>Search short paths</button>\r\n          {/* <p>{resultText}</p> */}\r\n          {resultsPanel}\r\n        </div>\r\n        <div className=\"flexbox-horizontal\">\r\n          {text}\r\n        </div>\r\n        <div className=\"source-code-link\">\r\n          <a href=\"https://github.com/PinewoodPip/ee2calc\">Source code</a>\r\n        </div>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\n// --------- HELPER FUNCTIONS ------------\r\n\r\nfunction shuffle(array) { // https://stackoverflow.com/a/2450976\r\n  var currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nfunction capitalizeFirstLetter(string) { // https://stackoverflow.com/a/1026087\r\n  return string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n\r\nfunction isInObject(thing, obj) {\r\n  for (var x in obj) {\r\n    if (obj[x] == thing)\r\n      return true\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction getTotalPoints(build) {\r\n  var points = 0;\r\n  for (var x = 0; x < build.length; x++) {\r\n    points += build[x].nodes;\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nfunction GetMinimumPoints(path) {\r\n  var points = 0;\r\n\r\n  for (var x = 0; x < path.length; x++) {\r\n    var asp = path[x].aspect;\r\n    points += (path[x].operation == \"add\") ? asp.nodes : -asp.nodes;\r\n\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nfunction GetPathOperationOrder(build, toRemove) {\r\n  var path = [];\r\n\r\n  for (var x = 0; x < build.length; x++) {\r\n    var asp = build[x];\r\n    path.push({aspect: asp, operation: \"add\"})\r\n  }\r\n\r\n  for (var z in toRemove) {\r\n    path.splice(toRemove[z].time, 0, {aspect: toRemove[z].aspect, operation: \"remove\"})\r\n  }\r\n  console.log(path);\r\n  return path;\r\n}\r\n\r\nfunction mergeIntoObject(build, aspect) {\r\n  var newList = {};\r\n  for (var x = 0; x < build.length; x++) {\r\n    newList[x] = build[x];\r\n  }\r\n  newList[aspect.id] = aspect;\r\n\r\n  return newList;\r\n}\r\n\r\nfunction randomProp(obj) {\r\n  var keys = Object.keys(obj);\r\n  return obj[keys[ keys.length * Math.random() << 0]];\r\n};\r\n\r\n// gets the highest requirement for each embodiment on a build\r\nfunction getTotalReqs(aspects, hideUnused=false) { // requires an array\r\n  var embodiments = {\r\n    force: 0,\r\n    entropy: 0,\r\n    form: 0,\r\n    inertia: 0,\r\n    life: 0,\r\n  };\r\n\r\n  // if (typeof aspects == \"object\") {\r\n  //   for (let x in aspect.requirements) {\r\n  //     embodiments[x] = aspect.requirements[x];\r\n  //   }\r\n  // }\r\n  // else {\r\n  //   for (var x in aspects) {\r\n  //     var aspect = aspects[x];\r\n  \r\n  //     for (var z in aspect.requirements) {\r\n  //       if (aspect.requirements[z] > embodiments[z])\r\n  //         embodiments[z] = aspect.requirements[z]\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  for (var x in aspects) {\r\n    var aspect = aspects[x];\r\n\r\n    for (var z in aspect.requirements) {\r\n      if (aspect.requirements[z] > embodiments[z])\r\n        embodiments[z] = aspect.requirements[z]\r\n    }\r\n  }\r\n\r\n  if (hideUnused) {\r\n    for (let z in embodiments) {\r\n      if (embodiments[z] <= 0)\r\n        delete embodiments[z]\r\n    }\r\n  }\r\n\r\n  return embodiments;\r\n}\r\n\r\nfunction getTotalRewards(aspects, showAny=false, hideUnused=false) {\r\n  var rewards = {\r\n    force: 0,\r\n    entropy: 0,\r\n    form: 0,\r\n    inertia: 0,\r\n    life: 0,\r\n  };\r\n\r\n  if (showAny)\r\n    rewards.any = 0;\r\n\r\n  for (var x in aspects) {\r\n    var aspect = aspects[x];\r\n\r\n    if (showAny && aspect.tier == 2)\r\n      rewards.any++;\r\n\r\n    for (var r in aspect.rewards) {\r\n      rewards[r] += aspect.rewards[r];\r\n    }\r\n  }\r\n\r\n  if (hideUnused) {\r\n    for (let z in rewards) {\r\n      if (rewards[z] <= 0)\r\n        delete rewards[z]\r\n    }\r\n  }\r\n\r\n  return rewards;\r\n}\r\n\r\nfunction fullfillsRequirements(build, aspect=null) {\r\n  if (aspect != null) {\r\n    var embodiments = getTotalRewards(build);\r\n    var reqs = getTotalReqs(aspect);\r\n\r\n    for (var e in reqs) {\r\n      if (embodiments[e] < reqs[e])\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n  else {\r\n    var embodiments = getTotalRewards(build);\r\n    var reqs = getTotalReqs(build);\r\n\r\n    for (var e in reqs) {\r\n      if (embodiments[e] < reqs[e])\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction aspectAlreadyPicked(build, aspect) {\r\n  for (var x = 0; x < build.length; x++) {\r\n    if (build[x].id == aspect.id)\r\n      return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport default App;\r\n\r\n// serity pls come back, we miss you :(","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}